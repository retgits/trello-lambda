language: go

go:
  - master

install:
  - LATEST_RELEASE=$(curl -L -s -H 'Accept: application/json' https://github.com/retgits/lambda-builder/releases/latest)
  - LATEST_VERSION=$(echo $LATEST_RELEASE | sed -e 's/.*"tag_name":"\([^"]*\)".*/\1/')
  - ARTIFACT_URL="https://github.com/retgits/lambda-builder/releases/download/$LATEST_VERSION/lambda-builder"
  - curl -O -L $ARTIFACT_URL
  - chmod +x lambda-builder
  - mv ./lambda-builder $HOME/gopath/bin
  - pip install awscli
  - pip install aws-sam-cli
  
script:
  - lambda-builder version
  - aws --version
  - sam --version